{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Link,Redirect}from'react-router-dom';import{read,update,updateUser}from'./apiUser';var Profile=function Profile(_ref){var match=_ref.match;var _useState=useState({name:'',email:'',password:'',error:false,success:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _isAuthenticated=isAuthenticated(),token=_isAuthenticated.token;var name=values.name,email=values.email,password=values.password,error=values.error,success=values.success;var init=function init(userId){// console.log(userId);\nread(userId,token).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:true}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,email:data.email}));}});};useEffect(function(){init(match.params.userId);},[]);var handleChange=function handleChange(name){return function(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,e.target.value)));};};var clickSubmit=function clickSubmit(e){e.preventDefault();update(match.params.userId,token,{name:name,email:email,password:password}).then(function(data){if(data.error){// console.log(data.error);\nalert(data.error);}else{updateUser(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,email:data.email,success:true}));});}});};var redirectUser=function redirectUser(success){if(success){return/*#__PURE__*/React.createElement(Redirect,{to:\"/user/dashboard\"});}};var profileUpdate=function profileUpdate(name,email,password){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:handleChange('name'),className:\"form-control\",value:name})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",onChange:handleChange('email'),className:\"form-control\",value:email})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:handleChange('password'),className:\"form-control\",value:password})),/*#__PURE__*/React.createElement(\"button\",{onClick:clickSubmit,className:\"btn btn-primary\"},\"Submit\"));};return/*#__PURE__*/React.createElement(Layout,{title:\"Profile\",description:\"Update your profile\",className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-4\"},\"Profile update\"),profileUpdate(name,email,password),redirectUser(success));};export default Profile;","map":{"version":3,"sources":["C:/Users/hp/Desktop/photo-app-demo/photo-app-front/src/user/Profile.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","Redirect","read","update","updateUser","Profile","match","name","email","password","error","success","values","setValues","token","init","userId","then","data","params","handleChange","e","target","value","clickSubmit","preventDefault","alert","redirectUser","profileUpdate"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { read, update, updateUser } from './apiUser';\r\n\r\nconst Profile = ({ match }) => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: false,\r\n        success: false\r\n    });\r\n\r\n    const { token } = isAuthenticated();\r\n    const { name, email, password, error, success } = values;\r\n\r\n    const init = userId => {\r\n        // console.log(userId);\r\n        read(userId, token).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: true });\r\n            } else {\r\n                setValues({ ...values, name: data.name, email: data.email });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init(match.params.userId);\r\n    }, []);\r\n\r\n    const handleChange = name => e => {\r\n        setValues({ ...values, error: false, [name]: e.target.value });\r\n    };\r\n\r\n    const clickSubmit = e => {\r\n        e.preventDefault();\r\n        update(match.params.userId, token, { name, email, password }).then(data => {\r\n            if (data.error) {\r\n                // console.log(data.error);\r\n                alert(data.error);\r\n            } else {\r\n                updateUser(data, () => {\r\n                    setValues({\r\n                        ...values,\r\n                        name: data.name,\r\n                        email: data.email,\r\n                        success: true\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const redirectUser = success => {\r\n        if (success) {\r\n            return <Redirect to=\"/user/dashboard\" />;\r\n        }\r\n    };\r\n\r\n    const profileUpdate = (name, email, password) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" onChange={handleChange('name')} className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input type=\"email\" onChange={handleChange('email')} className=\"form-control\" value={email} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input type=\"password\" onChange={handleChange('password')} className=\"form-control\" value={password} />\r\n            </div>\r\n\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <Layout title=\"Profile\" description=\"Update your profile\" className=\"container-fluid\">\r\n            <h2 className=\"mb-4\">Profile update</h2>\r\n            {profileUpdate(name, email, password)}\r\n            {redirectUser(success)}\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}
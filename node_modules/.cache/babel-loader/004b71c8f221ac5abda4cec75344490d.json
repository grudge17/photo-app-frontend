{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';//for state object as ith grabs value from form\nimport{Redirect}from'react-router-dom';import Layout from'../core/Layout';import{signin,aunthenticate,isAuthenticated}from'../auth/index';var Signin=function Signin(){var _useState=useState({email:\"\",password:\"\",error:\"\",loading:false,redirectToReferrer:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var email=values.email,password=values.password,error=values.error,loading=values.loading,redirectToReferrer=values.redirectToReferrer;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user;var handleChange=function handleChange(name){return function(event){//one fuction returning another function\nsetValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,event.target.value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();//this fuction restricts page from reloading to grab values\nsetValues(_objectSpread(_objectSpread({},values),{},{error:false,loading:true}));signin({email:email,password:password}).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error,loading:false}));}else{aunthenticate(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{redirectToReferrer:true}));});}});};var signUpForm=function signUpForm(){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('email'),type:\"email\",className:\"form-control\",values:email})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('password'),type:\"password\",className:\"form-control\",values:password})),/*#__PURE__*/React.createElement(\"button\",{onClick:clickSubmit,className:\"btn btn-primary\"},\"Submit\"));};var showError=function showError(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var showLoading=function showLoading(){return loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading...\"));};var redirectUser=function redirectUser(){if(redirectToReferrer){if(user){return/*#__PURE__*/React.createElement(Redirect,{to:\"/user/dashboard\"});}}if(isAuthenticated()){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}};return/*#__PURE__*/React.createElement(Layout,{title:\"Signin\",description:\"Signin to Node React E-commerce App\",className:\"container col-md-8 offset-md-2\"},showLoading(),showError(),signUpForm(),redirectUser());};export default Signin;","map":{"version":3,"sources":["C:/Users/hp/Desktop/photo-app-demo/photo-app-front/src/user/Signin.js"],"names":["React","useState","Redirect","Layout","signin","aunthenticate","isAuthenticated","Signin","email","password","error","loading","redirectToReferrer","values","setValues","user","handleChange","name","event","target","value","clickSubmit","preventDefault","then","data","signUpForm","showError","display","showLoading","redirectUser"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'//for state object as ith grabs value from form\r\nimport {Redirect} from 'react-router-dom'\r\nimport Layout from '../core/Layout'\r\nimport {signin,aunthenticate,isAuthenticated} from '../auth/index'\r\nconst Signin=()=> {\r\n    const [values,setValues]=useState({\r\n        email:\"\",\r\n        password:\"\",\r\n        error:\"\",\r\n        loading:false,\r\n        redirectToReferrer:false\r\n    })\r\n\r\n    const{email,password,error,loading,redirectToReferrer}=values\r\n    const{user}=isAuthenticated()\r\n\r\nconst handleChange=name=>event=>{//one fuction returning another function\r\nsetValues({...values,error:false,[name]:event.target.value})\r\n}\r\n\r\nconst clickSubmit=(event)=>{\r\n    event.preventDefault()//this fuction restricts page from reloading to grab values\r\n    setValues({...values,error:false,loading:true})\r\n    signin({email,password})\r\n    .then(data=>{\r\n        if(data.error){\r\n            setValues({...values,error:data.error,loading:false})\r\n        }else{\r\n            aunthenticate(data,()=>{\r\n                setValues({\r\n                    ...values,\r\n                    redirectToReferrer:true\r\n                })\r\n            })\r\n        }\r\n               \r\n    })\r\n}\r\n    const signUpForm=()=>(\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input \r\n                onChange={handleChange('email')} \r\n                type=\"email\" \r\n                className=\"form-control\"\r\n                values={email}\r\n                />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input \r\n                onChange={handleChange('password')} \r\n                type=\"password\" \r\n                className=\"form-control\"\r\n                values={password}\r\n                />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\nconst showError=()=>(\r\n    <div className=\"alert alert-danger\" style={{display:error?'':'none'}}>\r\n        {error}\r\n    </div>\r\n)\r\n\r\nconst showLoading=()=>(\r\n    loading && (\r\n        <div className=\"alert alert-info\">\r\n            <h2>Loading...</h2>\r\n        </div>\r\n    )\r\n)\r\n\r\nconst redirectUser=()=>{\r\n    if(redirectToReferrer){\r\n      if(user){\r\n        return <Redirect to=\"/user/dashboard\" />\r\n      }\r\n}\r\nif(isAuthenticated()){\r\n    return <Redirect to='/' />\r\n}\r\n}\r\n\r\n    return(\r\n    <Layout \r\n    title=\"Signin\" \r\n    description=\"Signin to Node React E-commerce App\"\r\n    className=\"container col-md-8 offset-md-2\"\r\n    >\r\n        {showLoading()}\r\n        {showError()}\r\n        {signUpForm()}\r\n        {redirectUser()}\r\n\r\n    </Layout>\r\n    )\r\n}\r\n\r\nexport default Signin;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Suspense}from'react';//for state object as ith grabs value from form\nimport Layout from'./Layout';import{Link}from'react-router-dom';import{getImages}from'./apiCore';import\"../styles.css\";import ShowImage from'./ShowImage';import{API}from'../config';var Card=React.lazy(function(){return import('./Card');});var Home=function Home(){var _useState=useState([]),user=_useState.user,token=_useState.token;var _useState2=useState([]),_useState3=_slicedToArray(_useState2,2),imagesByLimit=_useState3[0],setImagesByLimit=_useState3[1];var _useState4=useState([]),_useState5=_slicedToArray(_useState4,2),imagesByDate=_useState5[0],setImagesByDate=_useState5[1];var _useState6=useState(false),_useState7=_slicedToArray(_useState6,2),error=_useState7[0],setError=_useState7[1];var _useState8=useState(false),isOpen=_useState8.isOpen,setIsOpen=_useState8.setIsOpen;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isFetching=_useState10[0],setIsFetching=_useState10[1];var _useState11=useState(30),_useState12=_slicedToArray(_useState11,2),page=_useState12[0],setPage=_useState12[1];useEffect(function(){fetchData();window.addEventListener('scroll',handleScroll);},[]);var handleScroll=function handleScroll(){if(Math.ceil(window.innerHeight+document.documentElement.scrollTop)!==document.documentElement.offsetHeight||isFetching)return;setIsFetching(true);};var loadImagesByDate=function loadImagesByDate(){getImages('createdAt').then(function(data){if(data.error){setError(data.error);}else{setImagesByLimit(data);}});};var fetchData=function fetchData(){setPage(page+30);loadImagesByLimit(page);//  const data= await result.json()\n};useEffect(function(){if(!isFetching)return;fetchMoreListItems();},[isFetching]);var fetchMoreListItems=function fetchMoreListItems(){fetchData();setIsFetching(false);};var loadImagesByLimit=function loadImagesByLimit(limit){getImages('createdAt',limit).then(function(data){if(data.error){setError(data.error);}else{setImagesByLimit(data);}});};//   useEffect(()=>{\n//     loadImagesByDate()\n//     loadImagesByLimit()\n// },[])\nreturn/*#__PURE__*/ (//fvfvfvfvfv\nReact.createElement(Layout,{title:\"Home Page\",description:\"Node React Photo App\",className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},imagesByLimit.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{className:\"column mr-4 ml-2\"},/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"img\",{src:\"%PUBLIC_URL%/favicon.ico\",alt:\"Avatar\",style:{width:'50%'}})},/*#__PURE__*/React.createElement(Card,{image:item})));}),isFetching&&/*#__PURE__*/React.createElement(\"h1\",null,\"Fetching for more list items\"))));};export default Home;","map":{"version":3,"sources":["C:/Users/hp/Desktop/photo-app-demo/photo-app-front/src/core/Home.js"],"names":["React","useState","useEffect","Suspense","Layout","Link","getImages","ShowImage","API","Card","lazy","Home","user","token","imagesByLimit","setImagesByLimit","imagesByDate","setImagesByDate","error","setError","isOpen","setIsOpen","isFetching","setIsFetching","page","setPage","fetchData","window","addEventListener","handleScroll","Math","ceil","innerHeight","document","documentElement","scrollTop","offsetHeight","loadImagesByDate","then","data","loadImagesByLimit","fetchMoreListItems","limit","map","item","width"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,Suspense} from 'react'//for state object as ith grabs value from form\r\nimport Layout from './Layout'\r\nimport {Link} from 'react-router-dom'\r\nimport {getImages} from './apiCore'\r\nimport \"../styles.css\"\r\nimport ShowImage from './ShowImage';\r\nimport {API} from '../config'\r\nconst Card = React.lazy(()=> import('./Card'))\r\n\r\nconst Home=()=>{\r\n    const {user, token}=useState([])\r\n    const [imagesByLimit,setImagesByLimit]=useState([])\r\n    const [imagesByDate,setImagesByDate]=useState([])\r\n    const [error,setError]=useState(false)\r\n    const { isOpen,setIsOpen } = useState(false)\r\n\r\n    const [isFetching, setIsFetching] = useState(false);\r\n    const[page, setPage]=useState(30);\r\n\r\n    useEffect(()=>{\r\n        fetchData();\r\n        window.addEventListener('scroll', handleScroll);},[]);\r\n    \r\n\r\n    const handleScroll = () =>{\r\n        if(Math.ceil(window.innerHeight + document.documentElement.scrollTop) !== document.documentElement.offsetHeight\r\n        || isFetching) \r\n            return;\r\n        setIsFetching(true)\r\n    }\r\n\r\n\r\n    const loadImagesByDate=()=>{\r\n        getImages('createdAt').then(data=>{\r\n            if(data.error){\r\n                setError(data.error)\r\n            }else{\r\n                setImagesByLimit(data)\r\n            }\r\n        })\r\n      }\r\n\r\n      const fetchData =()=>{\r\n          \r\n            setPage(page+30);\r\n            loadImagesByLimit(page)\r\n          //  const data= await result.json()\r\n           \r\n         \r\n      }\r\n      useEffect(()=>{\r\n          if(!isFetching)return;\r\n          fetchMoreListItems();\r\n      }, [isFetching])\r\n\r\n      const fetchMoreListItems=()=>{\r\n          fetchData();\r\n          setIsFetching(false)\r\n      }\r\n      const loadImagesByLimit=(limit)=>{\r\n        getImages('createdAt',limit).then(data=>{\r\n            if(data.error){\r\n                setError(data.error)\r\n            }else{\r\n                setImagesByLimit(data)\r\n            }\r\n        })\r\n      }\r\n\r\n    //   useEffect(()=>{\r\n    //     loadImagesByDate()\r\n    //     loadImagesByLimit()\r\n    // },[])\r\n\r\n\r\n    \r\n        \r\n     \r\n\r\n    return( //fvfvfvfvfv\r\n    <Layout title=\"Home Page\" description=\"Node React Photo App\" className=\"container-fluid\">\r\n        {/* <button class=\"button button2\"> <Link to='/upload'><font color=\"white\"> Upload</font> </Link> </button> */}\r\n        \r\n   {/* <div>\r\n\r\n        {imagesByLimit.map((image,i)=>(\r\n              \r\n        <a class=\"example-image-link mr-4\" href={`${API}/image/photo/${image._id}`}  \r\n        data-lightbox=\"roadtrip\" >\r\n            <img class=\"example-image\" src={`${API}/image/photo/${image._id}`}  alt=\"\"/></a>\r\n        ))}\r\n        </div>  */}\r\n\r\n        \r\n        <div className=\"row\">\r\n        {imagesByLimit.map((item) =>(\r\n            <div className=\"column mr-4 ml-2\">\r\n             <Suspense fallback={<img src=\"%PUBLIC_URL%/favicon.ico\" alt='Avatar'style={{width:'50%'}}/>}>\r\n            <Card image={item}/>\r\n            </Suspense>\r\n            </div>\r\n        ))}\r\n        {isFetching && <h1>Fetching for more list items</h1>}\r\n      </div>  \r\n       \r\n</Layout>\r\n \r\n    )\r\n\r\n        }\r\n        \r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}
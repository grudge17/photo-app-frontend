{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Layout from'../core/Layout';import{isAuthenticated}from'../auth';import{Link}from'react-router-dom';import{addPic}from'../auth/index';import Dropzone from\"react-dropzone\";import\"../styles.css\";var AddPhoto=function AddPhoto(){var _useState=useState({title:'',description:'',photo:'',tags:'',uploadedBy:'',loading:false,error:'',createdImage:'',//redirectToProfile: false,\nformData:''}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var title=values.title,description=values.description,photo=values.photo,tags=values.tags,uploadedBy=values.uploadedBy,loading=values.loading,error=values.error,createdImage=values.createdImage,formData=values.formData;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;useEffect(function(){// this is used to grab the details from the browser\nsetValues(_objectSpread(_objectSpread({},values),{},{formData:new FormData()}));},[]);var handleChange=function handleChange(name){return function(event){var value=name==='photo'?event.target.files[0]:event.target.value;formData.set(name,value);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:'',loading:true}));addPic(user._id,token,formData).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error}));}else{setValues(_objectSpread(_objectSpread({},values),{},{title:'',description:'',photo:'',tags:'',loading:false,createdImage:data.name}));}});};var newPostForm=function newPostForm(){return/*#__PURE__*/React.createElement(\"form\",{className:\"mb-3\",onSubmit:clickSubmit},/*#__PURE__*/React.createElement(\"h4\",null,\"Post Photo\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"btn btn-secondary\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('photo'),type:\"file\",name:\"photo\",accept:\"image/*\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Title\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('title'),type:\"text\",className:\"form-control\",value:title})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Description\"),/*#__PURE__*/React.createElement(\"textarea\",{onChange:handleChange('description'),className:\"form-control\",value:description})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Tags\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('tags'),type:\"text\",className:\"form-control\",value:tags})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-primary\"},\"Add Image\"));};var showError=function showError(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var showSuccess=function showSuccess(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info\",style:{display:createdImage?'':'none'}},/*#__PURE__*/React.createElement(\"h2\",null,\"\".concat(createdImage),\" is added!\"));};var showLoading=function showLoading(){return loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading...\"));};return/*#__PURE__*/React.createElement(Layout,{title:\"Add Images\",description:\"G'day \".concat(user.name,\", ready to add images?\")},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 offset-md-2\"},showLoading(),showSuccess(),showError(),newPostForm())));};export default AddPhoto;","map":{"version":3,"sources":["C:/Users/hp/Desktop/photo-app-demo/photo-app-front/src/user/AddPhoto.js"],"names":["React","useEffect","useState","Layout","isAuthenticated","Link","addPic","Dropzone","AddPhoto","title","description","photo","tags","uploadedBy","loading","error","createdImage","formData","values","setValues","user","token","FormData","handleChange","name","event","value","target","files","set","clickSubmit","preventDefault","_id","then","data","newPostForm","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport{Link} from 'react-router-dom'\r\nimport {addPic} from '../auth/index'\r\nimport Dropzone from \"react-dropzone\";\r\nimport \"../styles.css\"\r\n\r\nconst AddPhoto=()=>{\r\n    const [values, setValues] = useState({\r\n        title: '',\r\n        description: '',\r\n        photo: '',\r\n        tags:'',\r\n        uploadedBy:'',\r\n        loading: false,\r\n        error: '',\r\n        createdImage: '',\r\n        //redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n    const {\r\n        title,\r\n        description,\r\n        photo,\r\n        tags,\r\n        uploadedBy,\r\n        loading,\r\n        error,\r\n        createdImage,\r\n        //redirectToProfile: false,\r\n        formData\r\n    }=values;\r\n\r\n\r\n\r\n\r\n    const { user, token } = isAuthenticated();\r\n\r\n    useEffect(() => {  // this is used to grab the details from the browser\r\n        setValues({...values,formData:new FormData()})\r\n    },[] )\r\n\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        addPic(user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    title: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    tags: '',\r\n                    loading: false,\r\n                    createdImage: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n    \r\n      \r\n\r\n    const newPostForm = () => (\r\n        \r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Title</label>\r\n                <input onChange={handleChange('title')} type=\"text\" className=\"form-control\" value={title} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Tags</label>\r\n                <input onChange={handleChange('tags')} type=\"text\" className=\"form-control\" value={tags} />\r\n            </div>\r\n            {/* <div className=\"form-group\">\r\n                <label className=\"text-muted\">Uploaded By</label>\r\n                <input type=\"hidden\" className=\"form-control\" value= {user._id} />\r\n            </div> */}\r\n\r\n           \r\n\r\n            <button className=\"btn btn-outline-primary\">Add Image</button>\r\n        </form>\r\n    );\r\n\r\n\r\n   \r\n\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdImage ? '' : 'none' }}>\r\n            <h2>{`${createdImage}`} is added!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    return (\r\n        <Layout title=\"Add Images\" description={`G'day ${user.name}, ready to add images?`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n    \r\n\r\nexport default AddPhoto;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
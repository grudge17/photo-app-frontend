{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\photo-app-demo\\\\photo-app-front\\\\src\\\\user\\\\AddPhoto.js\";\nimport React, { useEffect, useState } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link } from 'react-router-dom';\nimport { addPic } from '../auth/index';\nimport Dropzone from \"react-dropzone\";\nimport \"../styles.css\";\n\nconst AddPhoto = () => {\n  const [values, setValues] = useState({\n    title: '',\n    description: '',\n    photo: '',\n    tags: '',\n    uploadedBy: '',\n    loading: false,\n    error: '',\n    createdImage: '',\n    //redirectToProfile: false,\n    formData: ''\n  });\n  const {\n    title,\n    description,\n    photo,\n    tags,\n    uploadedBy,\n    loading,\n    error,\n    createdImage,\n    //redirectToProfile: false,\n    formData\n  } = values;\n  const {\n    user,\n    token\n  } = isAuthenticated();\n  useEffect(() => {\n    // this is used to grab the details from the browser\n    setValues({ ...values,\n      formData: new FormData()\n    });\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: '',\n      loading: true\n    });\n    addPic(user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          title: '',\n          description: '',\n          photo: '',\n          tags: '',\n          loading: false,\n          createdImage: data.name\n        });\n      }\n    });\n  };\n\n  const newPostForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \"Post Photo\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('photo'),\n    type: \"file\",\n    name: \"photo\",\n    accept: \"image/*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('title'),\n    type: \"text\",\n    className: \"form-control\",\n    value: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    onChange: handleChange('description'),\n    className: \"form-control\",\n    value: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Tags\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('tags'),\n    type: \"text\",\n    className: \"form-control\",\n    value: tags,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, \"Add Image\"));\n\n  const showError = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, error);\n\n  const showSuccess = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    style: {\n      display: createdImage ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, `${createdImage}`, \" is added!\"));\n\n  const showLoading = () => loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, \"Loading...\"));\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Add Images\",\n    description: `G'day ${user.name}, ready to add images?`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, showLoading(), showSuccess(), showError(), newPostForm())));\n};\n\nexport default AddPhoto;","map":{"version":3,"sources":["C:/Users/hp/Desktop/photo-app-demo/photo-app-front/src/user/AddPhoto.js"],"names":["React","useEffect","useState","Layout","isAuthenticated","Link","addPic","Dropzone","AddPhoto","values","setValues","title","description","photo","tags","uploadedBy","loading","error","createdImage","formData","user","token","FormData","handleChange","name","event","value","target","files","set","clickSubmit","preventDefault","_id","then","data","newPostForm","showError","display","showSuccess","showLoading"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport {isAuthenticated} from '../auth'\r\nimport{Link} from 'react-router-dom'\r\nimport {addPic} from '../auth/index'\r\nimport Dropzone from \"react-dropzone\";\r\nimport \"../styles.css\"\r\n\r\nconst AddPhoto=()=>{\r\n    const [values, setValues] = useState({\r\n        title: '',\r\n        description: '',\r\n        photo: '',\r\n        tags:'',\r\n        uploadedBy:'',\r\n        loading: false,\r\n        error: '',\r\n        createdImage: '',\r\n        //redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n    const {\r\n        title,\r\n        description,\r\n        photo,\r\n        tags,\r\n        uploadedBy,\r\n        loading,\r\n        error,\r\n        createdImage,\r\n        //redirectToProfile: false,\r\n        formData\r\n    }=values;\r\n\r\n\r\n\r\n\r\n    const { user, token } = isAuthenticated();\r\n\r\n    useEffect(() => {  // this is used to grab the details from the browser\r\n        setValues({...values,formData:new FormData()})\r\n    },[] )\r\n\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        addPic(user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    title: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    tags: '',\r\n                    loading: false,\r\n                    createdImage: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n    \r\n      \r\n\r\n    const newPostForm = () => (\r\n        \r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Title</label>\r\n                <input onChange={handleChange('title')} type=\"text\" className=\"form-control\" value={title} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Tags</label>\r\n                <input onChange={handleChange('tags')} type=\"text\" className=\"form-control\" value={tags} />\r\n            </div>\r\n            {/* <div className=\"form-group\">\r\n                <label className=\"text-muted\">Uploaded By</label>\r\n                <input type=\"hidden\" className=\"form-control\" value= {user._id} />\r\n            </div> */}\r\n\r\n           \r\n\r\n            <button className=\"btn btn-outline-primary\">Add Image</button>\r\n        </form>\r\n    );\r\n\r\n\r\n   \r\n\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdImage ? '' : 'none' }}>\r\n            <h2>{`${createdImage}`} is added!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    return (\r\n        <Layout title=\"Add Images\" description={`G'day ${user.name}, ready to add images?`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n    \r\n\r\nexport default AddPhoto;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}